<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>BikeX</title>
        <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
        <link rel="icon" type="image/png" href="/static/images/favicon.png">
        <!--[if IE]><link rel="shortcut icon" href="/static/images/favicon.ico"/><![endif]-->
        <script type="text/javascript" src="/static/d3.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript" src="/static/jquery.easing.1.3.js"></script>
        <style>

            body {
                margin: 0;
                padding: 0;
            }

            #container {
                overflow: hidden;
                position: absolute;
            }

            #svg_menu {
              width: 150%;

            }

            #myCanvas {
                width: 100%;
                overflow: hidden;
            }

            #container_marker {
                width: 100%;
                overflow: hidden;
                position: absolute;
            }

            #svg_marker {
                display: none;
            }

        </style>

        <script>

        var browserHeight = $(window).height();
        var browserWidth = $(window).width();

        $(document).ready(function(){

            $("#container").css("max-height", browserHeight);
            $("#container_marker").css("max-height", browserHeight);

            $("#button_tour").click(function() {
                $("#svg_menu").css("display", "none");
                $("#svg_marker").css("display", "inline");
                draw();
            });

        });

        $(window).resize(function(){
            browserHeight = $(window).height();
            $("#container").css("max-height", browserHeight);
            $("#container_marker").css("max-height", browserHeight);
        });

        (function() {
            var lastTime = 0;
            var vendors = ['ms', 'moz', 'webkit', 'o'];
            for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
                window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
                window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
                                           || window[vendors[x]+'CancelRequestAnimationFrame'];
            }
         
            if (!window.requestAnimationFrame)
                window.requestAnimationFrame = function(callback, element) {
                    var currTime = new Date().getTime();
                    var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                    var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
                      timeToCall);
                    lastTime = currTime + timeToCall;
                    return id;
                };
         
            if (!window.cancelAnimationFrame)
                window.cancelAnimationFrame = function(id) {
                    clearTimeout(id);
                };
        }());

        // Properties _____________________________________________

        var ball = $('#ball');
        var xMin = 0;
        var xMax = $(window).height() - ball.height();
        var pos = 0;
        var dir = 1;
        var speed = 8;
        var fps = 30;
        var interval = 1000 / fps;


        // Animation Logic ________________________________________

        var zoomOut = 0;

        function draw() {
            setTimeout(function() {
                window.requestAnimationFrame(draw);
                
                var c = document.getElementById("myCanvas");
                var ctx = c.getContext("2d");
                var img = new Image();
                
                img.src = '/static/images/bike.jpg';

                setTimeout(function() {
                    if (zoomOut < 7500) { 
                        var startingX = -14050;
                        var startingY = -8300;
                        zoomOut += 200;
                        ctx.drawImage(img, startingX + (zoomOut * 1.451), startingY + zoomOut, img.width * 9 - (zoomOut * 1.451), img.height * 9 - zoomOut);
                    }
                }, interval);
                
            }, interval);
        }

        //draw();

        </script>
    </head>
    <body>
    <div id="container">

        <svg id="svg_menu" xmlns="http://www.w3.org/2000/svg" version="1.1" width="2000" viewBox="0 0 6375 4245">

  <defs
     id="defs4747" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.19"
     inkscape:cx="423.83458"
     inkscape:cy="3487.204"
     inkscape:document-units="px"
     inkscape:current-layer="layer2"
     showgrid="false"
     units="px"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:window-width="1440"
     inkscape:window-height="851"
     inkscape:window-x="1"
     inkscape:window-y="0"
     inkscape:window-maximized="0" />
  <metadata
     id="metadata4750">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(507.85715,2554.1558)" />
  <g
     inkscape:groupmode="layer"
     id="layer2"
     inkscape:label="Layer 2">
    <rect
       style="fill:#363636;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5394"
       width="110.52631"
       height="110.52631"
       x="3905.2632"
       y="287.10526" />
    <rect
       style="fill:#363636;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5396"
       width="100"
       height="100"
       x="4431.5791"
       y="2245" />
    <rect
       style="fill:#363636;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5398"
       width="136.8421"
       height="136.8421"
       x="1389.4736"
       y="376.57895" />
    <rect
       style="fill:#363636;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5400"
       width="126.31579"
       height="126.31579"
       x="368.42105"
       y="3155.5264" />
    <rect
       style="fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5402"
       width="126.31579"
       height="126.31579"
       x="2689.4736"
       y="1923.9474" />
    <rect
       style="fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-opacity:1"
       id="rect5480"
       width="105.26316"
       height="105.26316"
       x="5.2631578"
       y="-2.3684211" />
  </g>


        </svg>

        <canvas id="myCanvas" width="1960" height="4000" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
        </canvas>

    </div>
    <div id="container_marker">
        <svg id="svg_marker" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 6757.5 4499.25">
          <defs
             id="defs5217" />
          <sodipodi:namedview
             id="base"
             pagecolor="#ffffff"
             bordercolor="#666666"
             borderopacity="1.0"
             inkscape:pageopacity="0.0"
             inkscape:pageshadow="2"
             inkscape:zoom="0.5"
             inkscape:cx="3993.8629"
             inkscape:cy="3696.7101"
             inkscape:document-units="px"
             inkscape:current-layer="layer2"
             showgrid="false"
             fit-margin-top="0"
             fit-margin-left="0"
             fit-margin-right="0"
             fit-margin-bottom="0"
             units="px"
             inkscape:window-width="1440"
             inkscape:window-height="851"
             inkscape:window-x="0"
             inkscape:window-y="0"
             inkscape:window-maximized="1" />
          <metadata
             id="metadata5220">
            <rdf:RDF>
              <cc:Work
                 rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type
                   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                <dc:title></dc:title>
              </cc:Work>
            </rdf:RDF>
          </metadata>
          <g
             inkscape:groupmode="layer"
             id="layer2"
             inkscape:label="pic"
             style="display:inline" />
          <g
             inkscape:label="Layer 1"
             inkscape:groupmode="layer"
             id="layer1"
             transform="translate(679.28571,2902.6953)">
            <rect
               style="fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#a3a3a3;stroke-opacity:1"
               id="marker_seat"
               width="62"
               height="62"
               x="892.71429"
               y="-2549.4414" />
            <rect
               style="fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#a3a3a3;stroke-opacity:1"
               id="marker_handle"
               width="60"
               height="60"
               x="2342.7144"
               y="-2765.4414" />
          </g>
        </svg>
    </div>

    </body>

</html>